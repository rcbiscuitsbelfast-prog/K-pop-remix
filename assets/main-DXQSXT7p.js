(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function t(o){if(o.ep)return;o.ep=!0;const c=e(o);fetch(o.href,c)}})();const i={currentZone:"synth_nexus",remixMode:!1,canvas:document.getElementById("gameCanvas"),ctx:null,isRunning:!1,lastTime:0},a={synth_nexus:{name:"Synth Nexus",description:"Central hub connecting all game zones",color:"#00ff00",elements:[{id:"btn_toppler",x:200,y:200,width:120,height:60,text:"Toppler",color:"#ff0000"},{id:"btn_spirit_tamer",x:400,y:200,width:120,height:60,text:"Spirit Tamer",color:"#0000ff"},{id:"btn_witcher_grove",x:300,y:300,width:120,height:60,text:"Witcher Grove",color:"#ffff00"},{id:"btn_overlink",x:300,y:400,width:120,height:60,text:"OverlinkPure",color:"#ff00ff"}]},toppler:{name:"Toppler Demo",description:"Physics-based platformer with modular systems",color:"#ff0000",elements:[{id:"platform",x:100,y:500,width:600,height:20,color:"#666666"},{id:"player",x:50,y:450,width:20,height:20,color:"#ff0000"},{id:"btn_back",x:700,y:50,width:80,height:30,text:"← Back",color:"#00ff00"}]},spirit_tamer:{name:"Spirit Tamer Demo",description:"Rhythm-based spirit collection game",color:"#0000ff",elements:[{id:"spirit",x:400,y:300,width:30,height:30,color:"#00ffff"},{id:"rhythm_bar",x:200,y:500,width:400,height:20,color:"#666666"},{id:"btn_back",x:700,y:50,width:80,height:30,text:"← Back",color:"#00ff00"}]},witcher_grove:{name:"Witcher Grove Demo",description:"Open-world exploration with quest systems",color:"#ffff00",elements:[{id:"tree",x:300,y:200,width:40,height:80,color:"#228b22"},{id:"quest_marker",x:500,y:300,width:20,height:20,color:"#ffd700"},{id:"btn_back",x:700,y:50,width:80,height:30,text:"← Back",color:"#00ff00"}]},overlink:{name:"OverlinkPure Zone",description:"Meta-zone with themes, audio, and badge systems",color:"#ff00ff",elements:[{id:"theme_selector",x:200,y:200,width:120,height:60,text:"Themes",color:"#00ffff"},{id:"audio_controls",x:400,y:200,width:120,height:60,text:"Audio",color:"#ff8800"},{id:"badge_system",x:300,y:300,width:120,height:60,text:"Badges",color:"#ff0088"},{id:"btn_back",x:700,y:50,width:80,height:30,text:"← Back",color:"#00ff00"}]}};function g(){if(!i.canvas)return console.error("Canvas not found"),!1;if(i.ctx=i.canvas.getContext("2d"),!i.ctx)return console.error("Could not get 2D context"),!1;const n=document.getElementById("gameContainer");return n&&(i.canvas.width=n.clientWidth,i.canvas.height=n.clientHeight),!0}function m(n){const r=a[n];if(!r)return;const e=i.ctx,t=i.canvas;e.fillStyle="#000000",e.fillRect(0,0,t.width,t.height),e.fillStyle=r.color+"20",e.fillRect(0,0,t.width,t.height),e.fillStyle=r.color,e.font="bold 32px Courier New",e.textAlign="center",e.fillText(r.name,t.width/2,80),e.font="16px Courier New",e.fillStyle="#ffffff",e.fillText(r.description,t.width/2,120),r.elements.forEach(o=>{e.fillStyle=o.color,e.fillRect(o.x,o.y,o.width,o.height),o.text&&(e.fillStyle="#ffffff",e.font="14px Courier New",e.textAlign="center",e.fillText(o.text,o.x+o.width/2,o.y+o.height/2+5))})}function d(n,r){const e=a[i.currentZone];e&&e.elements.forEach(t=>{if(n>=t.x&&n<=t.x+t.width&&r>=t.y&&r<=t.y+t.height){if(t.id==="btn_back"){i.currentZone="synth_nexus",l();return}if(t.id==="btn_toppler"){i.currentZone="toppler",l();return}if(t.id==="btn_spirit_tamer"){i.currentZone="spirit_tamer",l();return}if(t.id==="btn_witcher_grove"){i.currentZone="witcher_grove",l();return}if(t.id==="btn_overlink"){i.currentZone="overlink",l();return}console.log(`Interacted with: ${t.id}`)}})}function l(){const n=a[i.currentZone];if(!n)return;const r=document.getElementById("currentZone"),e=document.getElementById("remixStatus");r&&(r.textContent=n.name),e&&(e.textContent=i.remixMode?"On":"Off");const t=document.getElementById("remixToggle");t&&(t.textContent=i.remixMode?"Disable Remix Mode":"Enable Remix Mode")}function f(n){i.isRunning&&(i.lastTime=n,m(i.currentZone),requestAnimationFrame(f))}function x(){document.querySelectorAll(".mobileBtn").forEach(r=>{r.addEventListener("touchstart",e=>{e.preventDefault();const t=r.getBoundingClientRect(),o=t.left+t.width/2,c=t.top+t.height/2,s=i.canvas.getBoundingClientRect(),h=o-s.left,u=c-s.top;d(h,u)})})}function y(){document.addEventListener("keydown",n=>{switch(n.key){}})}function p(){i.canvas.addEventListener("click",n=>{const r=i.canvas.getBoundingClientRect(),e=n.clientX-r.left,t=n.clientY-r.top;d(e,t)})}function v(){const n=document.getElementById("remixToggle");n&&n.addEventListener("click",()=>{i.remixMode=!i.remixMode,l(),window.overlinkZone&&console.log("Remix mode toggled:",i.remixMode)})}function w(){const n=document.getElementById("loadingScreen"),r=document.getElementById("loadingProgress");if(n&&r){let e=0;const t=setInterval(()=>{e+=Math.random()*20,e>=100&&(e=100,clearInterval(t),setTimeout(()=>{n.classList.add("hidden"),b()},500)),r.style.width=e+"%"},100)}}function b(){if(!g()){console.error("Failed to initialize canvas");return}x(),y(),p(),v(),l(),i.isRunning=!0,i.lastTime=performance.now(),requestAnimationFrame(f),console.log("MIFF Sampler started successfully")}async function _(){try{console.log("OverlinkZone module available for integration"),window.overlinkZone={activateTheme:n=>console.log("Theme activated:",n),getAudioPlaybackState:()=>({isPlaying:!1,currentTheme:null}),getBadgePreview:()=>"Badge system available"}}catch(n){console.log("OverlinkZone not available:",n)}}document.addEventListener("DOMContentLoaded",async()=>{console.log("MIFF Sampler initializing..."),await _(),w()});
